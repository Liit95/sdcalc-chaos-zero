<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SDCalc - Chaos Zero Nightmare</title>
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&family=Inter:wght@300;400;500;600;700&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #0a0a0f 0%, #1a0a2e 50%, #16213e 100%);
            min-height: 100vh;
            padding: 20px;
            color: #e0e0e0;
            position: relative;
            overflow-x: hidden;
            zoom: 0.9;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background:
                radial-gradient(circle at 20% 50%, rgba(138, 43, 226, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(30, 144, 255, 0.1) 0%, transparent 50%);
            pointer-events: none;
            z-index: 0;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        .header {
            text-align: center;
            margin-bottom: 20px;
            background: linear-gradient(135deg, rgba(20, 20, 40, 0.95), rgba(40, 20, 60, 0.9));
            backdrop-filter: blur(20px);
            padding: 20px;
            border-radius: 20px;
            border: 2px solid rgba(138, 43, 226, 0.3);
            box-shadow: 0 0 40px rgba(138, 43, 226, 0.2);
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, transparent, #8a2be2, #1e90ff, transparent);
            animation: shimmer 3s infinite;
        }

        @keyframes shimmer {
            0%, 100% { transform: translateX(-100%); }
            50% { transform: translateX(100%); }
        }

        .kofi-container {
            position: absolute;
            top: 15px;
            right: 15px;
            z-index: 10;
        }

        .kofi-button {
            background: #13C3FF;
            color: white;
            padding: 8px 16px;
            border-radius: 8px;
            text-decoration: none;
            font-family: 'Orbitron', sans-serif;
            font-weight: 600;
            font-size: 0.9rem;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        .kofi-button:hover {
            background: #0FA8D6;
            box-shadow: 0 0 20px rgba(19, 195, 255, 0.5);
            transform: translateY(-2px);
        }

        .game-logo {
            width: 100%;
            max-width: 800px;
            height: auto;
            margin: 0 auto 15px;
            display: block;
            filter: drop-shadow(0 0 20px rgba(138, 43, 226, 0.5));
        }

        .subtitle {
            font-family: 'Orbitron', sans-serif;
            color: #b19cd9;
            font-size: 1.3rem;
            letter-spacing: 4px;
            text-transform: uppercase;
            font-weight: 600;
        }

        /* TABS */
        .tabs-container {
            position: absolute;
            top: 90px;
            right: 15px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .tab-btn {
            font-family: 'Orbitron', sans-serif;
            background: linear-gradient(135deg, rgba(138, 43, 226, 0.2), rgba(30, 144, 255, 0.2));
            color: #b19cd9;
            border: 2px solid rgba(138, 43, 226, 0.3);
            border-radius: 12px;
            padding: 10px 20px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            white-space: nowrap;
        }

        .tab-btn:hover {
            background: linear-gradient(135deg, rgba(138, 43, 226, 0.3), rgba(30, 144, 255, 0.3));
            border-color: #8a2be2;
            box-shadow: 0 0 20px rgba(138, 43, 226, 0.4);
        }

        .tab-btn.active {
            background: linear-gradient(135deg, #8a2be2, #1e90ff);
            color: #fff;
            border-color: #8a2be2;
            box-shadow: 0 0 30px rgba(138, 43, 226, 0.6);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* TIER SELECTOR */
        .tier-selector {
            background: linear-gradient(135deg, rgba(20, 20, 40, 0.95), rgba(40, 20, 60, 0.9));
            backdrop-filter: blur(20px);
            padding: 25px;
            margin-bottom: 30px;
            border-radius: 20px;
            border: 2px solid rgba(138, 43, 226, 0.3);
            box-shadow: 0 0 40px rgba(138, 43, 226, 0.2);
            position: relative;
        }

        .tier-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(138, 43, 226, 0.2);
        }

        .tier-icon {
            width: 32px;
            height: 32px;
            object-fit: contain;
            filter: drop-shadow(0 0 10px rgba(255, 140, 0, 0.8));
        }

        .tier-selector h3 {
            font-family: 'Orbitron', sans-serif;
            color: #fff;
            font-size: 1.3rem;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .tier-controls {
            display: flex;
            align-items: center;
            gap: 20px;
            justify-content: center;
        }

        .tier-input {
            font-family: 'Orbitron', sans-serif;
            font-size: 2.2rem;
            width: 100px;
            padding: 15px;
            text-align: center;
            border: 2px solid rgba(138, 43, 226, 0.5);
            border-radius: 15px;
            background: linear-gradient(135deg, rgba(10, 10, 20, 0.9), rgba(30, 10, 50, 0.8));
            color: #fff;
            font-weight: bold;
            box-shadow: 0 0 20px rgba(138, 43, 226, 0.3);
        }

        .tier-input::-webkit-inner-spin-button,
        .tier-input::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        .tier-input[type=number] {
            -moz-appearance: textfield;
        }

        .tier-btn {
            font-family: 'Orbitron', sans-serif;
            background: linear-gradient(135deg, rgba(138, 43, 226, 0.3), rgba(30, 144, 255, 0.3));
            color: white;
            border: 2px solid rgba(138, 43, 226, 0.5);
            border-radius: 12px;
            width: 50px;
            height: 50px;
            font-size: 2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .tier-btn:hover {
            background: linear-gradient(135deg, rgba(138, 43, 226, 0.6), rgba(30, 144, 255, 0.5));
            border-color: #8a2be2;
            box-shadow: 0 0 30px rgba(138, 43, 226, 0.6);
            transform: translateY(-2px);
        }

        .cap-display {
            margin-top: 20px;
            font-family: 'Orbitron', sans-serif;
            font-size: 1.2rem;
            color: #b19cd9;
            font-weight: bold;
            text-align: center;
            text-shadow: 0 0 10px rgba(177, 156, 217, 0.5);
        }

        /* CHARACTER SELECTOR */
        .combatants {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 18px;
        }

        /* BASIC MODE: 3 columns */
        .combatants-basic {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 18px;
        }

        @media (max-width: 1200px) {
            .combatants-basic {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .combatants-basic {
                grid-template-columns: 1fr;
            }
            
            .tabs-container {
                position: static;
                flex-direction: row;
                justify-content: center;
                margin-bottom: 20px;
            }
        }

        .combatant-card {
            background: linear-gradient(135deg, rgba(20, 20, 40, 0.95), rgba(40, 20, 60, 0.9));
            backdrop-filter: blur(20px);
            padding: 18px;
            border-radius: 20px;
            border: 2px solid rgba(138, 43, 226, 0.3);
            box-shadow: 0 0 40px rgba(138, 43, 226, 0.2);
        }

        .combatant-card:hover {
            border-color: rgba(138, 43, 226, 0.5);
            box-shadow: 0 0 50px rgba(138, 43, 226, 0.3);
        }

        .character-selector {
            position: relative;
            margin-bottom: 15px;
        }

        .selected-character {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 12px 15px;
            border: 2px solid rgba(138, 43, 226, 0.4);
            border-radius: 15px;
            cursor: pointer;
            background: linear-gradient(135deg, rgba(10, 10, 20, 0.8), rgba(30, 10, 50, 0.7));
            transition: all 0.3s ease;
        }

        .selected-character:hover {
            background: linear-gradient(135deg, rgba(20, 20, 40, 0.9), rgba(40, 20, 60, 0.8));
            border-color: #8a2be2;
            transform: translateY(-2px);
        }

        .character-avatar {
            width: 50px;
            height: 50px;
            border-radius: 8px;
            border: 2px solid #8a2be2;
            object-fit: cover;
            box-shadow: 0 0 15px rgba(138, 43, 226, 0.5);
        }

        .character-name {
            flex: 1;
            font-family: 'Orbitron', sans-serif;
            font-size: 1.1rem;
            font-weight: 600;
            color: #fff;
        }

        .dropdown-arrow {
            color: #8a2be2;
            font-size: 1.2rem;
        }

        .character-dropdown {
            position: absolute;
            top: calc(100% + 10px);
            left: 0;
            right: 0;
            background: linear-gradient(135deg, rgba(20, 20, 40, 0.98), rgba(40, 20, 60, 0.95));
            backdrop-filter: blur(20px);
            border: 2px solid rgba(138, 43, 226, 0.4);
            border-radius: 15px;
            max-height: 300px;
            overflow-y: auto;
            z-index: 1000;
            box-shadow: 0 10px 50px rgba(138, 43, 226, 0.3);
        }

        .character-search {
            position: sticky;
            top: 0;
            background: rgba(20, 20, 40, 0.98);
            padding: 15px;
            border-bottom: 2px solid rgba(138, 43, 226, 0.3);
            z-index: 10;
        }

        .character-search input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid rgba(138, 43, 226, 0.4);
            border-radius: 10px;
            background: rgba(10, 10, 20, 0.8);
            color: #fff;
            font-size: 1rem;
        }

        .character-option {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 15px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .character-option:hover {
            background: rgba(138, 43, 226, 0.2);
        }

        .character-option-avatar {
            width: 40px;
            height: 40px;
            border-radius: 6px;
            border: 2px solid #8a2be2;
            object-fit: cover;
        }

        .character-option-name {
            font-family: 'Inter', sans-serif;
            font-size: 1rem;
            font-weight: 600;
            color: #ddd;
        }

        /* POINTS DISPLAY */
        .points-display {
            margin-top: 15px;
            font-family: 'Orbitron', sans-serif;
            font-size: 1.8rem;
            font-weight: bold;
            text-align: center;
            padding: 18px;
            border-radius: 15px;
            transition: all 0.3s ease;
            border: 2px solid;
        }

        .points-ok {
            background: linear-gradient(135deg, rgba(0, 255, 127, 0.1), rgba(0, 200, 100, 0.1));
            color: #00ff7f;
            border-color: rgba(0, 255, 127, 0.4);
            box-shadow: 0 0 30px rgba(0, 255, 127, 0.2);
        }

        .points-over {
            background: linear-gradient(135deg, rgba(255, 0, 100, 0.1), rgba(200, 0, 80, 0.1));
            color: #ff0064;
            border-color: rgba(255, 0, 100, 0.4);
            box-shadow: 0 0 30px rgba(255, 0, 100, 0.2);
            animation: pulse-warning 2s infinite;
        }

        @keyframes pulse-warning {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }

        /* BASIC MODE STYLES */
        .deck-section {
            margin-top: 20px;
        }

        .section-title-basic {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.1rem;
            font-weight: 600;
            color: #ff8c00;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 15px;
            text-shadow: 0 0 8px rgba(255, 140, 0, 0.4);
        }

        /* BASIC MODE: Cards in 4 columns */
        .cards-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-bottom: 15px;
        }

        @media (max-width: 900px) {
            .cards-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        @media (max-width: 600px) {
            .cards-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .card-item {
            position: relative;
            background: linear-gradient(135deg, rgba(30, 30, 60, 0.8), rgba(50, 30, 80, 0.7));
            border: 2px solid rgba(138, 43, 226, 0.3);
            border-radius: 12px;
            padding: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            min-height: 140px;
            display: flex;
            flex-direction: column;
        }

        .card-item:hover:not(.removed) {
            border-color: #8a2be2;
            box-shadow: 0 0 20px rgba(138, 43, 226, 0.4);
            transform: translateY(-3px);
        }

        .card-item.removed {
            opacity: 0.4;
            cursor: not-allowed;
            background: linear-gradient(135deg, rgba(60, 30, 30, 0.6), rgba(80, 30, 30, 0.5));
        }

        .card-item.selected {
            border-color: #1e90ff;
            box-shadow: 0 0 30px rgba(30, 144, 255, 0.6);
        }

        .card-type-badge {
            position: absolute;
            top: 8px;
            left: 8px;
            background: rgba(138, 43, 226, 0.8);
            color: #fff;
            padding: 3px 8px;
            border-radius: 6px;
            font-size: 0.7rem;
            font-weight: bold;
            font-family: 'Orbitron', sans-serif;
        }

        .card-cost-badge {
            position: absolute;
            top: 8px;
            right: 8px;
            background: rgba(0, 255, 127, 0.9);
            color: #0a0a0f;
            padding: 3px 8px;
            border-radius: 6px;
            font-size: 0.75rem;
            font-weight: bold;
            font-family: 'Orbitron', sans-serif;
        }

        .card-icon {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 40px;
            height: 40px;
            opacity: 0.3;
            object-fit: contain;
            filter: drop-shadow(0 0 5px rgba(138, 43, 226, 0.5));
        }

        .card-placeholder {
            flex: 1;
            background: rgba(138, 43, 226, 0.1);
            border-radius: 8px;
            margin: 25px 0 10px;
            position: relative;
        }

        .card-label {
            font-size: 0.85rem;
            font-weight: 600;
            color: #ddd;
            text-align: center;
            font-family: 'Inter', sans-serif;
        }

        .add-card-btn, .undo-btn {
            font-family: 'Orbitron', sans-serif;
            width: 100%;
            padding: 12px;
            margin-top: 10px;
            background: linear-gradient(135deg, rgba(138, 43, 226, 0.3), rgba(30, 144, 255, 0.3));
            color: #fff;
            border: 2px solid rgba(138, 43, 226, 0.5);
            border-radius: 12px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .add-card-btn:hover, .undo-btn:hover:not(:disabled) {
            background: linear-gradient(135deg, rgba(138, 43, 226, 0.5), rgba(30, 144, 255, 0.5));
            border-color: #8a2be2;
            box-shadow: 0 0 20px rgba(138, 43, 226, 0.4);
        }

        .undo-btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }

        /* MODAL */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
        }

        .modal-content {
            background: linear-gradient(135deg, rgba(20, 20, 40, 0.98), rgba(40, 20, 60, 0.95));
            border: 2px solid rgba(138, 43, 226, 0.5);
            border-radius: 20px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 20px 100px rgba(138, 43, 226, 0.5);
        }

        .modal-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.5rem;
            font-weight: bold;
            color: #fff;
            text-align: center;
            margin-bottom: 20px;
            text-shadow: 0 0 10px rgba(138, 43, 226, 0.5);
        }

        .modal-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 20px;
        }

        .modal-option {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            background: rgba(138, 43, 226, 0.2);
            border: 2px solid rgba(138, 43, 226, 0.3);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .modal-option:hover:not(.disabled) {
            background: rgba(138, 43, 226, 0.3);
            border-color: #8a2be2;
            box-shadow: 0 0 20px rgba(138, 43, 226, 0.4);
        }

        .modal-option.disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }

        .modal-option-name {
            font-family: 'Inter', sans-serif;
            font-size: 1rem;
            font-weight: 600;
            color: #fff;
        }

        .modal-option-cost {
            font-family: 'Orbitron', sans-serif;
            font-size: 1rem;
            font-weight: bold;
            color: #00ff7f;
        }

        .modal-close {
            font-family: 'Orbitron', sans-serif;
            width: 100%;
            padding: 12px;
            background: linear-gradient(135deg, rgba(255, 0, 100, 0.3), rgba(200, 0, 80, 0.3));
            color: #ff0064;
            border: 2px solid rgba(255, 0, 100, 0.4);
            border-radius: 12px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .modal-close:hover {
            background: linear-gradient(135deg, rgba(255, 0, 100, 0.4), rgba(200, 0, 80, 0.4));
            border-color: #ff0064;
            box-shadow: 0 0 20px rgba(255, 0, 100, 0.4);
        }

        /* ADVANCED MODE STYLES */
        .actions-section {
            margin-bottom: 15px;
        }

        .section-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 1px solid rgba(138, 43, 226, 0.2);
        }

        .section-icon {
            width: 24px;
            height: 24px;
            object-fit: contain;
            filter: drop-shadow(0 0 8px rgba(255, 140, 0, 0.6));
        }

        .section-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 1rem;
            font-weight: 600;
            color: #ff8c00;
            text-transform: uppercase;
            letter-spacing: 1px;
            text-shadow: 0 0 8px rgba(255, 140, 0, 0.4);
        }

        .action-group {
            display: grid;
            gap: 8px;
        }

        .action-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px 12px;
            background: rgba(10, 10, 20, 0.6);
            border: 1px solid rgba(138, 43, 226, 0.2);
            border-radius: 10px;
            transition: all 0.2s ease;
        }

        .action-item:hover {
            background: rgba(138, 43, 226, 0.15);
            border-color: rgba(138, 43, 226, 0.4);
        }

        .action-name {
            font-size: 1rem;
            color: #d0d0d0;
            flex: 1;
            font-weight: 500;
        }

        .action-controls {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .action-btn {
            font-family: 'Orbitron', sans-serif;
            background: linear-gradient(135deg, rgba(138, 43, 226, 0.3), rgba(30, 144, 255, 0.3));
            color: white;
            border: 1px solid rgba(138, 43, 226, 0.4);
            border-radius: 8px;
            width: 32px;
            height: 32px;
            cursor: pointer;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .action-btn:hover:not(:disabled) {
            background: linear-gradient(135deg, rgba(138, 43, 226, 0.5), rgba(30, 144, 255, 0.5));
            border-color: #8a2be2;
            box-shadow: 0 0 20px rgba(138, 43, 226, 0.4);
            transform: scale(1.1);
        }

        .action-btn:disabled {
            background: rgba(30, 30, 50, 0.3);
            color: #555;
            cursor: not-allowed;
            opacity: 0.4;
        }

        .action-count {
            font-family: 'Orbitron', sans-serif;
            min-width: 40px;
            text-align: center;
            font-weight: bold;
            color: #fff;
            font-size: 1.1rem;
        }

        .action-value {
            font-family: 'Orbitron', sans-serif;
            min-width: 50px;
            text-align: right;
            font-weight: bold;
            color: #00ff7f;
            font-size: 1rem;
        }

        .reset-btn {
            font-family: 'Orbitron', sans-serif;
            background: linear-gradient(135deg, rgba(255, 0, 100, 0.2), rgba(200, 0, 80, 0.2));
            color: #ff6b9d;
            border: 2px solid rgba(255, 0, 100, 0.4);
            border-radius: 12px;
            padding: 10px 20px;
            cursor: pointer;
            font-size: 0.95rem;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-top: 15px;
            width: 100%;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .reset-btn:hover {
            background: linear-gradient(135deg, rgba(255, 0, 100, 0.3), rgba(200, 0, 80, 0.3));
            border-color: #ff0064;
            box-shadow: 0 0 20px rgba(255, 0, 100, 0.3);
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        const CHARACTERS = [
            { name: 'Amir', image: 'https://image.chaoszeronightmare.org/images/amir.webp' },
            { name: 'Beryl', image: 'https://image.chaoszeronightmare.org/images/beryl.webp' },
            { name: 'Cassius', image: 'https://image.chaoszeronightmare.org/images/cassius.webp' },
     //     { name: 'Chizuru', image: 'https://image.chaoszeronightmare.org/images/chizuru.webp' },
            { name: 'Haru', image: 'https://image.chaoszeronightmare.org/images/haru.webp' },
            { name: 'Hugo', image: 'https://image.chaoszeronightmare.org/images/hugo.webp' },
            { name: 'Kayron', image: 'https://image.chaoszeronightmare.org/images/kayron.webp' },
            { name: 'Khalipe', image: 'https://image.chaoszeronightmare.org/images/khalipe.webp' },
            { name: 'Lucas', image: 'https://image.chaoszeronightmare.org/images/lucas.webp' },
            { name: 'Luke', image: 'https://image.chaoszeronightmare.org/images/luke.webp' },
            { name: 'Magna', image: 'https://image.chaoszeronightmare.org/images/magna.webp' },
            { name: 'Maribell', image: 'https://image.chaoszeronightmare.org/images/maribell.webp' },
            { name: 'Mei Lin', image: 'https://image.chaoszeronightmare.org/images/mei-lin.webp' },
            { name: 'Mika', image: 'https://image.chaoszeronightmare.org/images/mika.webp' },
            { name: 'Nia', image: 'https://image.chaoszeronightmare.org/images/nia.webp' },
            { name: 'Orlea', image: 'https://image.chaoszeronightmare.org/images/orlea.webp' },
            { name: 'Owen', image: 'https://image.chaoszeronightmare.org/images/owen.webp' },
            { name: 'Rei', image: 'https://image.chaoszeronightmare.org/images/rei.webp' },
            { name: 'Renoa', image: 'https://image.chaoszeronightmare.org/images/renoa.webp' },
            { name: 'Rin', image: 'https://image.chaoszeronightmare.org/images/rin.webp' },
            { name: 'Selena', image: 'https://image.chaoszeronightmare.org/images/selena.webp' },
            { name: 'Tressa', image: 'https://image.chaoszeronightmare.org/images/tressa.webp' },
            { name: 'Veronica', image: 'https://image.chaoszeronightmare.org/images/veronica.webp' },
            { name: 'Yuki', image: 'https://image.chaoszeronightmare.org/images/yuki.webp' }
        ];

        const calculateCardCost = (card) => {
            let cost = 0;

            // Starting and Epiphany cards (the initial 8 cards)
            if (card.type === 'starting' || card.type === 'epiphany') {
                cost = 0; // Base cost is 0 for initial cards
                // Original cards OR replicas of original cards have free epiphanies
                if (card.originalCard || card.freeEpiphanies) {
                    // Normal epiphanies are free for original cards
                    if (card.hasDivine) cost += 20;  // Divine still costs +20
                } else {
                    // Non-original cards without free epiphanies cost normally
                    if (card.hasEpiphany) cost += 10;
                    if (card.hasDivine) cost += 20;
                }
            }

            // Neutral cards
            if (card.type === 'neutral') {
                // Converted cards cost 20 base (isFirstConversion is always false)
                if (card.isFirstConversion) {
                    cost = 0;
                } else {
                    cost = 20;
                }
                if (card.hasEpiphany) cost += 10;
                if (card.hasDivine) cost += 20;
            }

            // Monster cards
            if (card.type === 'monster') {
                cost = 80;
                if (card.hasEpiphany) cost += 10;
                if (card.hasDivine) cost += 20;
            }

            // Forbidden cards
            if (card.type === 'forbidden') {
                cost = 20;
                if (card.hasEpiphany) cost += 10;
                if (card.hasDivine) cost += 20;
            }

            return cost;
        };

        function CharacterSelector({ character, onSelect }) {
            const [isOpen, setIsOpen] = useState(false);
            const [search, setSearch] = useState('');
            const dropdownRef = useRef(null);
            const searchInputRef = useRef(null);

            useEffect(() => {
                function handleClickOutside(event) {
                    if (dropdownRef.current && !dropdownRef.current.contains(event.target)) {
                        setIsOpen(false);
                    }
                }
                document.addEventListener('mousedown', handleClickOutside);
                return () => document.removeEventListener('mousedown', handleClickOutside);
            }, []);

            // Auto-focus search input when dropdown opens
            useEffect(() => {
                if (isOpen && searchInputRef.current) {
                    searchInputRef.current.focus();
                }
            }, [isOpen]);

            const filteredCharacters = CHARACTERS.filter(char =>
                char.name.toLowerCase().includes(search.toLowerCase())
            );

            return (
                <div className="character-selector" ref={dropdownRef}>
                    <div className="selected-character" onClick={() => setIsOpen(!isOpen)}>
                        <img src={character.image} alt={character.name} className="character-avatar" />
                        <span className="character-name">{character.name}</span>
                        <span className="dropdown-arrow">{isOpen ? '▲' : '▼'}</span>
                    </div>

                    {isOpen && (
                        <div className="character-dropdown">
                            <div className="character-search">
                                <input
                                    ref={searchInputRef}
                                    type="text"
                                    placeholder="Search character..."
                                    value={search}
                                    onChange={(e) => setSearch(e.target.value)}
                                    onClick={(e) => e.stopPropagation()}
                                />
                            </div>
                            {filteredCharacters.map((char) => (
                                <div
                                    key={char.name}
                                    className="character-option"
                                    onClick={() => {
                                        onSelect(char);
                                        setIsOpen(false);
                                        setSearch('');
                                    }}
                                >
                                    <img src={char.image} alt={char.name} className="character-option-avatar" />
                                    <span className="character-option-name">{char.name}</span>
                                </div>
                            ))}
                        </div>
                    )}
                </div>
            );
        }

        function BasicMode({ tier, cap, combatant, onUpdate }) {
            const [cards, setCards] = useState([
                { id: 1, type: 'starting', label: 'Starting 1', originalCard: true, canHaveEpiphany: false },
                { id: 2, type: 'starting', label: 'Starting 2', originalCard: true, canHaveEpiphany: false },
                { id: 3, type: 'starting', label: 'Starting 3', originalCard: true, canHaveEpiphany: false },
                { id: 4, type: 'starting', label: 'Starting 4', originalCard: true, canHaveEpiphany: true },
                { id: 5, type: 'epiphany', label: 'Epiphany 1', originalCard: true, canHaveEpiphany: true },
                { id: 6, type: 'epiphany', label: 'Epiphany 2', originalCard: true, canHaveEpiphany: true },
                { id: 7, type: 'epiphany', label: 'Epiphany 3', originalCard: true, canHaveEpiphany: true },
                { id: 8, type: 'epiphany', label: 'Epiphany 4', originalCard: true, canHaveEpiphany: true },
            ]);

            const [selectedCard, setSelectedCard] = useState(null);
            const [showModal, setShowModal] = useState(false);
            const [modalType, setModalType] = useState('action');
            const [removalsCount, setRemovalsCount] = useState(0);
            const [replicationsCount, setReplicationsCount] = useState(0);
            const [conversionsCount, setConversionsCount] = useState(0);
            const [history, setHistory] = useState([]);
            const [actionCosts, setActionCosts] = useState([]);

            const totalPoints = actionCosts.reduce((sum, cost) => sum + cost, 0) +
                               cards.reduce((sum, card) => sum + (card.removed ? 0 : calculateCardCost(card)), 0);
            const isOverCap = totalPoints > cap;

            const saveHistory = () => {
                setHistory([...history, {
                    cards: JSON.parse(JSON.stringify(cards)),
                    removalsCount,
                    replicationsCount,
                    conversionsCount,
                    actionCosts: [...actionCosts]
                }]);
            };

            const handleUndo = () => {
                if (history.length === 0) return;
                const lastState = history[history.length - 1];
                setCards(lastState.cards);
                setRemovalsCount(lastState.removalsCount);
                setReplicationsCount(lastState.replicationsCount);
                setConversionsCount(lastState.conversionsCount);
                setActionCosts(lastState.actionCosts);
                setHistory(history.slice(0, -1));
            };

            const handleCardClick = (card) => {
                if (card.removed) return;
                setSelectedCard(card);
                setModalType('action');
                setShowModal(true);
            };

            // Removal costs: 0, 10, 30, 50, 70, 70, 70...
            const getRemovalCost = (count) => {
                if (count === 0) return 0;
                if (count === 1) return 10;
                if (count === 2) return 30;
                if (count === 3) return 50;
                return 70;
            };

            const getReplicationCost = (count) => {
                if (count === 0) return 0;
                if (count === 1) return 10;
                if (count === 2) return 30;
                if (count === 3) return 50;
                return 70;
            };

            const handleCardAction = (action) => {
                if (!selectedCard) return;

                saveHistory();
                const newCards = [...cards];
                const cardIndex = newCards.findIndex(c => c.id === selectedCard.id);

                switch(action) {
                    case 'epiphany':
                        newCards[cardIndex] = {
                            ...newCards[cardIndex],
                            hasEpiphany: true,
                            label: newCards[cardIndex].label.replace(' +E', '').replace(' +D', '') + ' +E',
                        };
                        break;

                    case 'divineEpiphany':
                        newCards[cardIndex] = {
                            ...newCards[cardIndex],
                            hasDivine: true,
                            label: newCards[cardIndex].label.replace(' +E', '').replace(' +D', '') + ' +D',
                        };
                        break;

                    case 'remove':
                        const removalBaseCost = getRemovalCost(removalsCount);
                        const removalCost = removalBaseCost + (newCards[cardIndex].originalCard ? 20 : 0);

                        newCards[cardIndex] = {
                            ...newCards[cardIndex],
                            removed: true,
                        };
                        setActionCosts([...actionCosts, removalCost]);
                        setRemovalsCount(removalsCount + 1);
                        break;

                    case 'replicate':
                        const replicationBaseCost = getReplicationCost(replicationsCount);
                        const replicationCost = replicationBaseCost;
                        const newCard = {
                            id: Date.now(),
                            type: newCards[cardIndex].type,
                            label: newCards[cardIndex].label + ' (Copy)',
                            hasEpiphany: newCards[cardIndex].hasEpiphany,
                            hasDivine: newCards[cardIndex].hasDivine,
                            canHaveEpiphany: newCards[cardIndex].canHaveEpiphany,
                            originalCard: false,
                            // If duplicating an original card, epiphanies should remain free
                            freeEpiphanies: newCards[cardIndex].originalCard
                        };
                        newCards.push(newCard);
                        setActionCosts([...actionCosts, replicationCost]);
                        setReplicationsCount(replicationsCount + 1);
                        break;

                    case 'conversion':
                        // Conversion costs 10 + the neutral card cost (20) = 30 total
                        const conversionCost = 10;

                        newCards[cardIndex] = {
                            ...newCards[cardIndex],
                            type: 'neutral',
                            label: 'Neutral Card (Converted)',
                            canHaveEpiphany: true,
                            originalCard: false,
                            hasEpiphany: false,
                            hasDivine: false,
                            isFirstConversion: false  // False so the neutral card costs 20 points
                        };

                        setActionCosts([...actionCosts, conversionCost]);
                        setConversionsCount(conversionsCount + 1);
                        break;
                }

                setCards(newCards);
                setShowModal(false);
                setSelectedCard(null);
            };

            const handleAddCard = (type) => {
                saveHistory();
                let label = '';

                switch(type) {
                    case 'neutral':
                        label = 'Neutral Card';
                        break;
                    case 'monster':
                        label = 'Monster Card';
                        break;
                    case 'forbidden':
                        label = 'Forbidden Card';
                        break;
                }

                const newCard = {
                    id: Date.now(),
                    type: type,
                    label: label,
                    canHaveEpiphany: true, // All acquired cards can have epiphany/divine
                    originalCard: false
                };

                setCards([...cards, newCard]);
                setShowModal(false);
            };

            const openAddModal = () => {
                setModalType('add');
                setShowModal(true);
            };

            const canAddEpiphany = (card) => {
                return card.canHaveEpiphany && !card.hasEpiphany && !card.hasDivine;
            };

            const canAddDivine = (card) => {
                return card.canHaveEpiphany && !card.hasDivine && !card.hasEpiphany;
            };

            const canReplicate = (card) => {
                return card.type === 'epiphany' ||
                       (card.type === 'starting' && card.id === 4) ||
                       card.type === 'neutral' ||
                       card.type === 'monster' ||
                       card.type === 'forbidden';
            };

            const canConvert = (card) => {
                return card.type === 'starting' || card.type === 'epiphany';
            };

            return (
                <div className="combatant-card">
                    <CharacterSelector
                        character={combatant}
                        onSelect={onUpdate}
                    />

                    <div className={`points-display ${isOverCap ? 'points-over' : 'points-ok'}`}>
                        {totalPoints} / {cap} {isOverCap ? '⚠' : '✓'}
                    </div>

                    <div className="deck-section">
                        <div className="section-title-basic">
                            Your Deck ({cards.filter(c => !c.removed).length} cards)
                        </div>
                        <div className="cards-grid">
                            {cards.map(card => (
                                <div
                                    key={card.id}
                                    className={`card-item ${card.removed ? 'removed' : ''} ${selectedCard?.id === card.id ? 'selected' : ''}`}
                                    onClick={() => !card.removed && handleCardClick(card)}
                                >
                                    <div className="card-type-badge">
                                        {card.type === 'starting' ? 'START' :
                                         card.type === 'epiphany' ? 'EPIPH' :
                                         card.type.toUpperCase()}
                                    </div>
                                    {!card.removed && calculateCardCost(card) > 0 && (
                                        <div className="card-cost-badge">+{calculateCardCost(card)}</div>
                                    )}
                                    <div className="card-placeholder">
                                        <img src="card.png" alt="Card" className="card-icon" />
                                    </div>
                                    <div className="card-label">{card.removed ? 'REMOVED' : card.label}</div>
                                </div>
                            ))}
                        </div>

                        <button className="add-card-btn" onClick={openAddModal}>
                            + Add Card
                        </button>

                        <button
                            className="undo-btn"
                            onClick={handleUndo}
                            disabled={history.length === 0}
                        >
                            ↶ Undo Last Action
                        </button>
                    </div>

                    {showModal && (
                        <div className="modal-overlay" onClick={() => setShowModal(false)}>
                            <div className="modal-content" onClick={(e) => e.stopPropagation()}>
                                <div className="modal-title">
                                    {modalType === 'action' ? 'Modify Card' : 'Add New Card'}
                                </div>

                                <div className="modal-options">
                                    {modalType === 'action' ? (
                                        <>
                                            <div
                                                className={`modal-option ${!canAddEpiphany(selectedCard) ? 'disabled' : ''}`}
                                                onClick={() => canAddEpiphany(selectedCard) && handleCardAction('epiphany')}
                                            >
                                                <span className="modal-option-name">Add Epiphany</span>
                                                <span className="modal-option-cost">+10</span>
                                            </div>
                                            <div
                                                className={`modal-option ${!canAddDivine(selectedCard) ? 'disabled' : ''}`}
                                                onClick={() => canAddDivine(selectedCard) && handleCardAction('divineEpiphany')}
                                            >
                                                <span className="modal-option-name">Add Divine Epiphany</span>
                                                <span className="modal-option-cost">+20</span>
                                            </div>
                                            <div
                                                className="modal-option"
                                                onClick={() => handleCardAction('remove')}
                                            >
                                                <span className="modal-option-name">Remove Card</span>
                                                <span className="modal-option-cost">
                                                    +{getRemovalCost(removalsCount) + (selectedCard?.originalCard ? 20 : 0)}
                                                </span>
                                            </div>
                                            <div
                                                className={`modal-option ${!canReplicate(selectedCard) ? 'disabled' : ''}`}
                                                onClick={() => canReplicate(selectedCard) && handleCardAction('replicate')}
                                            >
                                                <span className="modal-option-name">Replicate Card</span>
                                                <span className="modal-option-cost">
                                                    +{getReplicationCost(replicationsCount) + (selectedCard?.hasDivine ? 20 : 0)}
                                                </span>
                                            </div>
                                            <div
                                                className={`modal-option ${!canConvert(selectedCard) ? 'disabled' : ''}`}
                                                onClick={() => canConvert(selectedCard) && handleCardAction('conversion')}
                                            >
                                                <span className="modal-option-name">Convert to Neutral</span>
                                                <span className="modal-option-cost">+10</span>
                                            </div>
                                        </>
                                    ) : (
                                        <>
                                            <div className="modal-option" onClick={() => handleAddCard('neutral')}>
                                                <span className="modal-option-name">Neutral Card</span>
                                                <span className="modal-option-cost">+20</span>
                                            </div>
                                            <div className="modal-option" onClick={() => handleAddCard('monster')}>
                                                <span className="modal-option-name">Monster Card</span>
                                                <span className="modal-option-cost">+80</span>
                                            </div>
                                            <div className="modal-option" onClick={() => handleAddCard('forbidden')}>
                                                <span className="modal-option-name">Forbidden Card</span>
                                                <span className="modal-option-cost">+20</span>
                                            </div>
                                        </>
                                    )}
                                </div>

                                <button className="modal-close" onClick={() => setShowModal(false)}>
                                    Close
                                </button>
                            </div>
                        </div>
                    )}
                </div>
            );
        }

        function AdvancedMode({ tier, cap, combatant, onUpdate }) {
            const ACTION_TYPES = {
                REMOVE_CARD: 'remove_card',
                REMOVE_BASIC_EPIPHANY: 'remove_basic_epiphany',
                NEUTRAL_CARD: 'neutral_card',
                EPIPHANY_MODIFIER: 'epiphany_modifier',
                DIVINE_EPIPHANY_MODIFIER: 'divine_epiphany_modifier',
                MONSTER_CARD: 'monster_card',
                FORBIDDEN_CARD: 'forbidden_card',
                CARD_CONVERSION: 'card_conversion',
                DIVINE_UPGRADE: 'divine_upgrade',
                REPLICATE_CARD: 'replicate_card',
                REPLICATE_DIVINE: 'replicate_divine',
            };

            const [actions, setActions] = useState({});

            const getRemovalCost = (count) => {
                if (count === 1) return 0;
                if (count === 2) return 10;
                if (count === 3) return 30;
                if (count === 4) return 50;
                return 70;
            };

            const getReplicationCost = (count) => {
                if (count === 1) return 0;
                if (count === 2) return 10;
                if (count === 3) return 30;
                if (count === 4) return 50;
                return 70;
            };

            const calculateTotal = () => {
                let total = 0;

                const removals = actions[ACTION_TYPES.REMOVE_CARD] || 0;
                for (let i = 1; i <= removals; i++) {
                    total += getRemovalCost(i);
                }

                total += (actions[ACTION_TYPES.REMOVE_BASIC_EPIPHANY] || 0) * 20;
                total += (actions[ACTION_TYPES.NEUTRAL_CARD] || 0) * 20;
                total += (actions[ACTION_TYPES.EPIPHANY_MODIFIER] || 0) * 10;
                total += (actions[ACTION_TYPES.DIVINE_EPIPHANY_MODIFIER] || 0) * 20;
                total += (actions[ACTION_TYPES.MONSTER_CARD] || 0) * 80;
                total += (actions[ACTION_TYPES.FORBIDDEN_CARD] || 0) * 20;
                total += (actions[ACTION_TYPES.CARD_CONVERSION] || 0) * 10;
                total += (actions[ACTION_TYPES.DIVINE_UPGRADE] || 0) * 20;

                const replications = actions[ACTION_TYPES.REPLICATE_CARD] || 0;
                for (let i = 1; i <= replications; i++) {
                    total += getReplicationCost(i);
                }

                total += (actions[ACTION_TYPES.REPLICATE_DIVINE] || 0) * 20;

                return total;
            };

            const updateAction = (actionType, delta) => {
                const current = actions[actionType] || 0;
                const newValue = Math.max(0, current + delta);
                setActions({...actions, [actionType]: newValue});
            };

            const resetAll = () => {
                setActions({});
            };

            const ActionButton = ({ actionType, label, value, progressive = false }) => {
                const count = actions[actionType] || 0;

                let totalValue = 0;
                if (progressive) {
                    const getCostFunc = actionType === ACTION_TYPES.REMOVE_CARD ? getRemovalCost : getReplicationCost;
                    for (let i = 1; i <= count; i++) {
                        totalValue += getCostFunc(i);
                    }
                } else {
                    totalValue = value * count;
                }

                return (
                    <div className="action-item">
                        <span className="action-name">{label}</span>
                        <div className="action-controls">
                            <button
                                className="action-btn"
                                onClick={() => updateAction(actionType, -1)}
                                disabled={count === 0}
                            >
                                −
                            </button>
                            <span className="action-count">{count}</span>
                            <button
                                className="action-btn"
                                onClick={() => updateAction(actionType, 1)}
                            >
                                +
                            </button>
                            <span className="action-value">+{totalValue}</span>
                        </div>
                    </div>
                );
            };

            const total = calculateTotal();
            const isOver = total > cap;

            return (
                <div className="combatant-card">
                    <CharacterSelector
                        character={combatant}
                        onSelect={onUpdate}
                    />

                    <div className={`points-display ${isOver ? 'points-over' : 'points-ok'}`}>
                        {total} / {cap} {isOver ? '⚠' : '✓'}
                    </div>

                    <div className="actions-section">
                        <div className="section-header">
                            <img src="delete.png" alt="Remove" className="section-icon" />
                            <div className="section-title">Card Removal</div>
                        </div>
                        <div className="action-group">
                            <ActionButton
                                actionType={ACTION_TYPES.REMOVE_CARD}
                                label="Remove Card"
                                progressive={true}
                            />
                            <ActionButton
                                actionType={ACTION_TYPES.REMOVE_BASIC_EPIPHANY}
                                label="+ Basic/Epiphany Removed"
                                value={20}
                            />
                        </div>
                    </div>

                    <div className="actions-section">
                        <div className="section-header">
                            <img src="card.png" alt="Card" className="section-icon" />
                            <div className="section-title">Card Acquisition</div>
                        </div>
                        <div className="action-group">
                            <ActionButton
                                actionType={ACTION_TYPES.NEUTRAL_CARD}
                                label="Neutral Card"
                                value={20}
                            />
                            <ActionButton
                                actionType={ACTION_TYPES.EPIPHANY_MODIFIER}
                                label="+ Epiphany"
                                value={10}
                            />
                            <ActionButton
                                actionType={ACTION_TYPES.DIVINE_EPIPHANY_MODIFIER}
                                label="+ Divine Epiphany"
                                value={20}
                            />
                            <ActionButton
                                actionType={ACTION_TYPES.MONSTER_CARD}
                                label="Monster Card"
                                value={80}
                            />
                            <ActionButton
                                actionType={ACTION_TYPES.FORBIDDEN_CARD}
                                label="Forbidden Card"
                                value={20}
                            />
                        </div>
                    </div>

                    <div className="actions-section">
                        <div className="section-header">
                            <img src="upgrade.png" alt="Upgrade" className="section-icon" />
                            <div className="section-title">Conversion & Upgrades</div>
                        </div>
                        <div className="action-group">
                            <ActionButton
                                actionType={ACTION_TYPES.CARD_CONVERSION}
                                label="Card Conversion"
                                value={10}
                            />
                            <ActionButton
                                actionType={ACTION_TYPES.DIVINE_UPGRADE}
                                label="Divine Epiphany Upgrade"
                                value={20}
                            />
                        </div>
                    </div>

                    <div className="actions-section">
                        <div className="section-header">
                            <img src="duplicar.png" alt="Duplicate" className="section-icon" />
                            <div className="section-title">Card Replication</div>
                        </div>
                        <div className="action-group">
                            <ActionButton
                                actionType={ACTION_TYPES.REPLICATE_CARD}
                                label="Replicate Card"
                                progressive={true}
                            />
                            <ActionButton
                                actionType={ACTION_TYPES.REPLICATE_DIVINE}
                                label="+ Divine Replicated"
                                value={20}
                            />
                        </div>
                    </div>

                    <button
                        className="reset-btn"
                        onClick={resetAll}
                    >
                        Reset
                    </button>
                </div>
            );
        }

        function App() {
            const [activeTab, setActiveTab] = useState('advanced');
            const [tier, setTier] = useState(8);
            const [combatants, setCombatants] = useState([
                CHARACTERS[0],
                CHARACTERS[1],
                CHARACTERS[2]
            ]);

            const cap = 30 + (tier - 1) * 10;

            const updateCombatant = (index, character) => {
                const newCombatants = [...combatants];
                newCombatants[index] = character;
                setCombatants(newCombatants);
            };

            return (
                <div className="container">
                    <div className="header">
                        <div className="kofi-container">
                            <a href="https://ko-fi.com/D1D31ODV0G" target="_blank" className="kofi-button">
                                ☕ Support Me
                            </a>
                        </div>
                        <img
                            src="Chaos-Zero-Nightmare_L.webp"
                            alt="Chaos Zero Nightmare"
                            className="game-logo"
                        />
                        <div className="subtitle">Save Data Calculator</div>
                    </div>

                    <div className="tier-selector">
                        <div className="tabs-container">
                            <button
                                className={`tab-btn ${activeTab === 'advanced' ? 'active' : ''}`}
                                onClick={() => setActiveTab('advanced')}
                            >
                                Advanced
                            </button>
                            <button
                                className={`tab-btn ${activeTab === 'basic' ? 'active' : ''}`}
                                onClick={() => setActiveTab('basic')}
                            >
                                Basic (BETA)
                            </button>
                        </div>
                        
                        <div className="tier-header">
                            <img src="Savedata.png" alt="Tier" className="tier-icon" />
                            <h3>Chaos Tier</h3>
                        </div>
                        <div className="tier-controls">
                            <button className="tier-btn" onClick={() => setTier(Math.max(1, tier - 1))}>−</button>
                            <input
                                type="number"
                                className="tier-input"
                                value={tier}
                                onChange={(e) => setTier(Math.max(1, parseInt(e.target.value) || 1))}
                                min="1"
                            />
                            <button className="tier-btn" onClick={() => setTier(tier + 1)}>+</button>
                        </div>
                        <div className="cap-display">
                            Faint Memory Limit: {cap} points
                        </div>
                    </div>

                    <div className={`tab-content ${activeTab === 'basic' ? 'active' : ''}`}>
                        <div className="combatants-basic">
                            {combatants.map((combatant, index) => (
                                <BasicMode
                                    key={index}
                                    tier={tier}
                                    cap={cap}
                                    combatant={combatant}
                                    onUpdate={(char) => updateCombatant(index, char)}
                                />
                            ))}
                        </div>
                    </div>

                    <div className={`tab-content ${activeTab === 'advanced' ? 'active' : ''}`}>
                        <div className="combatants">
                            {combatants.map((combatant, index) => (
                                <AdvancedMode
                                    key={index}
                                    tier={tier}
                                    cap={cap}
                                    combatant={combatant}
                                    onUpdate={(char) => updateCombatant(index, char)}
                                />
                            ))}
                        </div>
                    </div>
                </div>
            );
        }

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
